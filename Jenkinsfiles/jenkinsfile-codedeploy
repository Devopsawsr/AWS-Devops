pipeline {
    agent {label 'mnp-app-slave'}
    stages {    
        stage('Running on MNP-Dev Environment') {
            steps{
                checkout scm
                echo "Removing files and folders"
                sh 'ls -al'
                sh 'rm -rf .git'
                echo "Deploying on MNP-DEV Environment by Code deploy"    
                step([$class: 'AWSCodeDeployPublisher',
                       applicationName:'mnp-prod-app',
                       awsAccessKey: '', awsSecretKey: '', deploymentConfig: 'CodeDeployDefault.OneAtATime', deploymentGroupAppspec: false, deploymentGroupName: 'mnp-prod-dg', excludes: '', iamRoleArn: '', includes: '**', proxyHost: '', proxyPort: 0, region: 'us-east-1', s3bucket: 'mnp-prod-deployment', s3prefix: 'mnp-prod', subdirectory: '', versionFileName: '', waitForCompletion: false]
                    )    
            }    
        }                
    }
}
