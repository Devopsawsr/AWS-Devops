pipeline{
    agent none
    stages{
        stage ("Checking out the code and running Deployment") {
            agent any
            steps {
                checkout scm
            }
        }
        stage ("CodeDeploy") {
            steps {
                echo "Deploying on Dev Environment"
                step([$class: 'AWSCodeDeployPublisher',
                       applicationName:'mnp-tech',
                       awsAccessKey: '', awsSecretKey: '', deploymentConfig: 'CodeDeployDefault.OneAtATime', deploymentGroupAppspec: false, deploymentGroupName: 'mnp-dg', excludes: '', iamRoleArn: '', includes: '**', proxyHost: '', proxyPort: 0, region: 'us-east-1', s3bucket: 'mnp-test-2152', s3prefix: 'test1', subdirectory: '', versionFileName: '', waitForCompletion: false]
                    )
            }
        }
    }
}
